## Sharing State Between Components

### state 끌어 올리기(Lifting state up)

- 두 컴포넌트의 상태가 항상 함께 변경되기를 원할 때, 컴포넌트의 가장 가까운 공통 부모 컴포넌트를 찾아서 부모 컴포넌트에서 state를 추가하고, 하위 컴포넌트의 props으로 전달
- 상태를 상위 컴포넌트로 전달할 경우 부모는 모든 자식 컴포넌트를 포함해 하위 트리 전체를 리렌더링 하므로, 일부 상황에서 성능 문제가 있을 수 있다.

### 제어 vs 비제어 컴포넌트

- 제어 컴포넌트
  - 로컬 상태를 가진 컴포넌트를 보통 비제어 컴포넌트라 부름 `uncontrolled`
  - 예를 들어, Pannel 컴포넌트의 활성화를 결정하는 state(isActive)가 내부에 있다면, Pannel 컴포넌트는 부모 컴포넌트가 활성화 여부에 영향을 줄 수 없으므로 제어되지 않는다.
- 비제어 컴포넌트
  - 정보가 로컬 상태가 아닌 props에 의해 전달되는 컴포넌트는 제어 컴포넌트라 부름 `controlled`
  - 부모 컴포넌트 Accordion에서 자식 컴포넌트 Pannel로 isActive state를 props로 전달해 주는 경우
- 비제어 컴포넌트는 사용하기 쉽지만 유연성이 떨어짐 / 제어 컴포넌트는 유연하지만 부모 컴포넌트에서 설정이 필요
- 즉, 컴포넌트에는 state와 props가 혼합되어 있는 경우가 일반적이고, **props를 통해 어떤 정보를 제어해야 하는지, state를 통해 어떤 정보는 제어하지 않아야 하는지를 고려해서 컴포넌트를 작성하자!**

### `지역 상태`를 효과적으로 사용하는 방법

- 상위 컴포넌트에서 상태를 정의하는 -> 상태 끌어올리기(위의 설명)
- 상위 컴포넌트에서 내용을 정의하는 -> 내용 끌어올리기(Lifting content up)
  - 즉, `JSX` 요소를 상위 컴포넌트로 끌러올리기 / 해당 기법의 변형으로 `children prop`을 사용할 수 있음
  - `children prop`은 JSX 형식으로 중첩된 자식 요소를 표현하는 특별한 prop

---

**💡컴포넌트를 제어할지, 비제어할지 고려하기 / 지역 상태를 효과적으로 사용하는 방법 및 패턴 활용법**

### 참고

- https://react.dev/learn/sharing-state-between-components
- [도서] 리액트 훅을 활용한 마이크로 상태 관리 p.28~38
